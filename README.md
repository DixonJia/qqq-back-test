# 纳斯达克100 双资产回测工具

这是一个前端静态网页，用于模拟将资金分为两部分（一部分买纳斯达克100 指数/ETF，另一部分买货币基金）并进行年度再平衡与年度提取的回测。

主要功能
- 设置初始资金、纳斯达克/货币的初始比例
- 假设货币基金固定年化收益率
- 支持每年再平衡到初始比例
- 支持每年提取（固定金额或百分比），可选择在年初或年末提取
- 支持上传 CSV（Year,ReturnPercent）形式的纳斯达克年度回报数据
- 输出表格与简单折线图，并可导出结果 CSV

如何准备年度收益数据
1. 推荐使用代表性ETF（如 QQQ）的历史数据并汇总为年度回报率（Year,ReturnPercent）。
2. 在 Yahoo Finance 下载对应 ETF 的历史日线数据，然后在本地用 Excel/脚本计算每年的回报（例如年初到年末的总回报）。
3. 将结果另存为 CSV，格式示例：

```
2020,30.0
2021,20.5
2022,-25.3
2023,45.1
```

使用方法
1. 在浏览器中打开 `index.html`。
2. 填写参数或上传 CSV 年度回报文件（或点击页面上的示例按钮载入占位数据）。
3. 点击“运行回测”查看每年的资产情况，必要时点击“下载结果 CSV”。

注意
- 页面为纯前端工具；若希望自动抓取线上数据可能会遇到跨域（CORS）限制，推荐先在本地准备好年度收益 CSV 后上传。
- 页面中提供的“示例”数据仅为占位，不能作为真实历史数据使用。

自动获取示例数据（本地脚本）
-----------------------------
仓库内提供了一个脚本 `fetch_qqq_annual.py`，可在本地运行以下载 QQQ 的历史日线数据并计算年度回报，生成 CSV（Year,ReturnPercent）。用法示例：

```bash
pip install yfinance pandas
python fetch_qqq_annual.py --start 1999-03-10 --end 2026-01-28 --out qqq_annual_returns.csv
```

脚本说明：优先使用 `yfinance` 下载；若受限则回退到 `stooq.com` 的公共 CSV 源。若两者均不可用，请手动准备年度收益 CSV 并在网页中上传。
